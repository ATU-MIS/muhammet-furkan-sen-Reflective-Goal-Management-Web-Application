<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add New Goal - My Goal Journey</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="app">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-logo">
                <span class="sidebar-logo-icon">üöÄ</span>
                <span>Goal Journey</span>
            </div>
            
            <nav class="sidebar-nav">
                <a href="dashboard.html" class="sidebar-link">
                    <span class="sidebar-icon">üìä</span> Dashboard
                </a>
                <a href="profile.html" class="sidebar-link">
                    <span class="sidebar-icon">üë§</span> Create Profile
                </a>
                <a href="add-goal.html" class="sidebar-link">
                    <span class="sidebar-icon">üéØ</span> Add Goal
                </a>
                <a href="dashboard.html" class="sidebar-link">
                    <span class="sidebar-icon">üìù</span> My Goals
                </a>
                <a href="goal-detail.html" class="sidebar-link">
                    <span class="sidebar-icon">üîç</span> Goal Details
                </a>
                <a href="notes.html" class="sidebar-link">
                    <span class="sidebar-icon">üìå</span> Notes
                </a>
                <a href="milestones.html" class="sidebar-link">
                    <span class="sidebar-icon">üö©</span> Milestones
                </a>
                <a href="goal-story.html" class="sidebar-link">
                    <span class="sidebar-icon">‚è≥</span> Goal Story
                </a>
                <a href="failure-log.html" class="sidebar-link">
                    <span class="sidebar-icon">üìâ</span> Failure Log
                </a>
                <a href="time-reality-check.html" class="sidebar-link">
                    <span class="sidebar-icon">‚è±Ô∏è</span> Time Reality Check
                </a>
            </nav>
        </aside>

        <!-- Main Content Wrapper -->
        <div class="main-content-wrapper">
            <!-- Header -->
            <header class="main-header" style="justify-content: space-between;">
                <button id="mobile-menu-toggle" class="mobile-menu-toggle">
                    ‚ò∞
                </button>
                
                <div class="user-preview">
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <span>Furkan</span>
                        <div style="width: 32px; height: 32px; border-radius: 50%; background: var(--primary); display: flex; align-items: center; justify-content: center; font-weight: bold; color: white;">F</div>
                    </div>
                </div>
            </header>

            <main class="container" style="display: flex; justify-content: center; padding-top: 3rem;">
            <div style="width: 100%; max-width: 600px; background: var(--bg-card); padding: 2rem; border-radius: 1rem; border: 1px solid var(--border-color); box-shadow: var(--shadow-lg);">
                <h2 style="margin-bottom: 1.5rem;">Create New Goal</h2>
                
                <form id="add-goal-form" novalidate>
                    <!-- Title -->
                    <div class="form-group">
                        <label class="form-label" for="title">Goal Title</label>
                        <input type="text" id="title" class="form-input" placeholder="e.g., Learn Guitar" required minlength="3">
                        <div class="error-message" id="error-title">Please enter a valid title (min 3 chars).</div>
                    </div>

                    <!-- Description -->
                    <div class="form-group">
                        <label class="form-label" for="description">Description</label>
                        <textarea id="description" class="form-textarea" rows="3" placeholder="Why is this goal important?" required></textarea>
                         <div class="error-message" id="error-description">Please provide a description.</div>
                    </div>

                    <!-- Date -->
                    <div class="form-group">
                        <label class="form-label" for="deadline">Target Completion Date</label>
                        <input type="date" id="deadline" class="form-input" required>
                        <div class="error-message" id="error-deadline">Please select a future date.</div>
                    </div>

                    <!-- Tags -->
                    <div class="form-group">
                        <label class="form-label" for="tags">Tags (comma separated)</label>
                        <input type="text" id="tags" class="form-input" placeholder="e.g., Music, Hobby, Skill">
                    </div>

                    <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                         <button type="button" class="btn btn-secondary" style="flex: 1;" onclick="window.location.href='dashboard_mockup.html'">Cancel</button>
                        <button type="submit" class="btn btn-primary" style="flex: 1;">Save Goal</button>
                    </div>
                </form>
            </div>
        </main>
            </main>
        </div>
    </div>
    <script src="js/ui-sidebar.js"></script>
    <script>
        // Set min date to today
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('deadline').setAttribute('min', today);

        document.getElementById('add-goal-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            let isValid = true;
            
            // Reset errors
            document.querySelectorAll('.error-message').forEach(el => el.style.display = 'none');
            document.querySelectorAll('.form-input, .form-textarea').forEach(el => el.classList.remove('error'));

            // Title Validation
            const title = document.getElementById('title');
            if (title.value.trim().length < 3) {
                isValid = false;
                title.classList.add('error');
                document.getElementById('error-title').style.display = 'block';
            }

            // Description Validation
            const desc = document.getElementById('description');
            if (desc.value.trim().length === 0) {
                isValid = false;
                desc.classList.add('error');
                document.getElementById('error-description').style.display = 'block';
            }

            // Date Validation
            const deadline = document.getElementById('deadline');
            if (!deadline.value) {
                isValid = false;
                deadline.classList.add('error');
                document.getElementById('error-deadline').style.display = 'block';
            }

            if (isValid) {
                const btn = this.querySelector('button[type="submit"]');
                const originalText = btn.textContent;
                btn.textContent = "Creating...";
                btn.style.backgroundColor = "var(--success)";
                
                setTimeout(() => {
                    alert('Goal created successfully!');
                    // In a real app, redirect or clear form
                    btn.textContent = originalText;
                    btn.style.backgroundColor = "";
                }, 800);
            }
        });
    </script>
</body>
</html>
